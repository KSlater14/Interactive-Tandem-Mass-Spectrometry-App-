import streamlit as st

# Function to generate the HTML for JSmol viewer
def generate_jsmol_html(pdb_id):
    return f"""
    <script type="text/javascript" src="https://chemapps.stolaf.edu/jmol/jsmol/JSmol.min.js"></script>
    <script type="text/javascript">
        Jmol.getApplet("jsmolApplet0", {{
            width: 500,
            height: 500,
            use: "HTML5",
            j2sPath: "https://chemapps.stolaf.edu/jmol/jsmol/j2s",
            script: "load=//files.rcsb.org/view/{pdb_id}.pdb;cartoons only;color structure"
        }});
    </script>
    <div id="jsmolApplet0" style="margin:auto;"></div>
    """

# Streamlit app to visualize a protein structure in 3D using JSmol
def show_3d_structure():
    st.title("3D Protein Structure Visualization")

    # PDB ID for 6ZNS is hardcoded here
    pdb_id = "6ZNS"

    # Generate the JSmol HTML
    jsmol_html = generate_jsmol_html(pdb_id)

    # Display the HTML with JSmol embedded
    st.components.v1.html(jsmol_html, height=550, width=550)

# Example of how to use this in your Streamlit navigation
if __name__ == "__main__":
    show_3d_structure()
